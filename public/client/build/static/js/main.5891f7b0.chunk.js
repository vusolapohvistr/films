(window.webpackJsonpfilmsweb=window.webpackJsonpfilmsweb||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),c=a(16),s=a(17),o=a.n(s),u=a(34),m=a(19),d=a(12),p=a(22),h=a(23),f=a(27),v=a(4),b=a(178),y=a(166),g=a(41),E=a.n(g),O={getFilms:function(e){return E.a.get("".concat("","/api/film"),{params:e})},getFilmById:function(e){return E.a.get("".concat("","/api/film/").concat(e))},putFilm:function(e){return E.a.put("".concat("","/api/film"),e)},deleteFilmById:function(e){return E.a.delete("".concat("","/api/film/").concat(e))}},j={title:"21",release_date:0,format:"",actors:""};var w=function(e){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),r=new Set(n);return t.every((function(e){return r.size===Object.keys(e).length}))}(e,j)},S=a(169),F=a(136),I=a(170),x=a(74),C=a.n(x),k=a(76),D=a.n(k),q=a(75),A=a.n(q),_=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlerButtonExtend=function(){var e=a.state.extended;a.setState({extended:!e})},a.handlerButtonDelete=function(){a.props.handlerDeleteFilm(a.props.film.id)},a.drawInfo=function(){return r.a.createElement("div",null,a.props.film.format&&a.props.film.release_date?r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(F.a,null,"Release date: ",new Date(a.props.film.release_date).getFullYear()),r.a.createElement(F.a,null,"Format: ",a.props.film.format)):"",a.props.film.hasOwnProperty("id")&&a.props.film.actors?r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(F.a,null,"Stars: ",a.props.film.actors),r.a.createElement(F.a,null,"Id: ",a.props.film.id)):"")},a.state={extended:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(S.a,{className:e.paper},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{className:e.title},r.a.createElement(F.a,{variant:"h5",component:"h3"},this.props.film.title)),r.a.createElement(y.a,null,r.a.createElement(I.a,{size:"small","aria-label":"delete",className:e.fab,onClick:this.handlerButtonDelete},r.a.createElement(C.a,null)),r.a.createElement(I.a,{color:"primary",size:"small",variant:"extended","aria-label":"delete",className:e.fab,onClick:this.handlerButtonExtend},this.state.extended?r.a.createElement(A.a,null):r.a.createElement(D.a,null)))),this.state.extended?this.drawInfo():"")}}]),t}(r.a.Component),N=Object(v.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{paddingTop:e.spacing(1),padding:e.spacing(1)},title:{flexGrow:1},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}))(_),B=a(83),P=a(9),R=a(177),T=a(187),M=a(183),W=a(176),G=a(172),L=a(171),z=a(79),J=a.n(z);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlerInputTitle=function(e){var t=a.state.film;a.setState({film:U({},t,{title:e.target.value})})},a.handlerInputDate=function(e){var t=a.state.film;a.setState({film:U({},t,{release_date:e.target.value})})},a.handlerInputFormat=function(e){var t=a.state.film;a.setState({film:U({},t,{format:e.target.value})})},a.handlerInputActors=function(e){var t=a.state.film;a.setState({film:U({},t,{actors:e.target.value})})},a.handlerOpen=function(){var e=a.state.open;a.setState({open:!e})},a.handlerCancel=function(){a.setState({film:{title:"",release_date:"",format:"",actors:""},open:!1})},a.handlerSubmit=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.handlerAddFilm(a.state.film);case 2:a.handlerCancel();case 3:case"end":return e.stop()}}),e)}))),a.handlerButtonFileInput=function(){document.getElementById("dialog_file_input").click()},a.handlerFileInput=function(){var e=document.getElementById("dialog_file_input").files;e=e[e.length-1];var t=new FileReader;t.readAsText(e),t.onload=function(e){var t=e.target.result.split("\n"),n=[],r={};t.forEach((function(e){if(e.length>1){var t=e.split(": "),a=Object(B.a)(t,2),l=a[0],i=a[1];"Stars"===l?r.actors=i:"Release Year"===l?r.release_date=i:r[l.toLowerCase()]=i}else r.title?n.push(r):r={},r={}})),a.props.handlerMassiveAddFilms(n),a.handlerCancel()}},a.state={open:!1,film:{title:"",release_date:"",format:"",actors:""}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.handlerOpen,color:"secondary","aria-label":"add"},r.a.createElement(J.a,null)),r.a.createElement(M.a,{open:this.state.open,onClose:this.handlerOpen},r.a.createElement(L.a,null,"Add film"),r.a.createElement(G.a,null,r.a.createElement(T.a,{required:!0,autoFocus:!0,margin:"dense",label:"Title",value:this.state.film.title,onChange:this.handlerInputTitle,fullWidth:!0}),r.a.createElement(T.a,{autoFocus:!0,margin:"dense",label:"Release Date",type:"date",value:this.state.film.release_date,onChange:this.handlerInputDate,InputLabelProps:{shrink:!0},fullWidth:!0}),r.a.createElement(T.a,{margin:"dense",label:"Format",value:this.state.film.format,onChange:this.handlerInputFormat,fullWidth:!0}),r.a.createElement(T.a,{margin:"dense",label:"Stars",value:this.state.film.actors,onChange:this.handlerInputActors,fullWidth:!0})),r.a.createElement(W.a,null,r.a.createElement(R.a,{onClick:this.handlerCancel,color:"secondary"},"Cancel"),r.a.createElement("input",{type:"file",accept:".txt",className:e.invisible,id:"dialog_file_input",onInput:this.handlerFileInput}),r.a.createElement(R.a,{color:"primary",onClick:this.handlerButtonFileInput},"Upload from file"),r.a.createElement(R.a,{onClick:this.handlerSubmit,color:"primary"},"Submit"))))}}]),t}(r.a.Component),K=Object(v.a)((function(e){return{invisible:{display:"None"}}}))(H),Q=a(81),V=a.n(Q),X=a(86),Z=a(18),$=a(175),ee=a(188),te=a(181),ae=a(184),ne=a(80),re=a.n(ne),le=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSelectType=function(e){var t=a.state.query;t.type=e.target.value,a.setState({query:t}),a.searchFilms(a.state.query)},a.handleSelectOrder=function(e){var t=a.state.query;t.order=e.target.value,a.setState({query:t}),a.searchFilms(a.state.query)},a.handleSearchInput=function(e){var t=a.state.query;t.query=e.target.value,a.setState({query:t}),a.searchFilms(a.state.query)},a.searchFilms=re()(a.props.handlerSearch,100),a.state={query:{type:"title",query:"",order:"DESC"}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(y.a,{container:!0},r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(V.a,null)),r.a.createElement(X.a,{placeholder:"Search\u2026",value:this.state.query.query,classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:this.handleSearchInput})),r.a.createElement($.a,{className:e.searchSelect},r.a.createElement(ee.a,{htmlFor:"search-by"},"Search by"),r.a.createElement(te.a,{onChange:this.handleSelectType,value:this.state.query.type,displayEmpty:!0},r.a.createElement(ae.a,{value:"title"},"title"),r.a.createElement(ae.a,{value:"actors"},"actor"))),r.a.createElement($.a,{className:e.searchSelect},r.a.createElement(ee.a,{htmlFor:"search-by"},"Order"),r.a.createElement(te.a,{onChange:this.handleSelectOrder,value:this.state.query.order,displayEmpty:!0},r.a.createElement(ae.a,{value:"ASC"},"ascending"),r.a.createElement(ae.a,{value:"DESC"},"descending"))))}}]),t}(r.a.Component),ie=Object(v.a)((function(e){return{search:Object(P.a)({position:"relative",display:"flex",alignItems:"center",flexGrow:1,borderRadius:e.shape.borderRadius,backgroundColor:Object(Z.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Z.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",flexGrow:1},inputInput:{padding:e.spacing(1,1,1,0),transition:e.transitions.create("width"),width:"100%"},searchSelect:{flexGrow:.1}}}))(le),ce=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlerSearch=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getFilms(t);case 2:n=e.sent,a.setState({films:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlerAddFilm=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.putFilm(t);case 2:n=e.sent,r=n.data,l=a.state.films,a.setState({films:[].concat(Object(c.a)(l),[r])});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlerDeleteFilm=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.deleteFilmById(t);case 2:n=a.state.films.findIndex((function(e){return e.id===t})),r=a.state.films.slice(0,n).concat(a.state.films.slice(n+1,a.state.films.length)),a.setState({films:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlerMassiveAddFilms=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,l,i,s,u,m,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=!0,l=!1,i=void 0,e.prev=4,s=t[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)m=u.value,w(m)?n.push(O.putFilm(m)):console.log("Wrong film data");e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),l=!0,i=e.t0;case 12:e.prev=12,e.prev=13,r||null==s.return||s.return();case 15:if(e.prev=15,!l){e.next=18;break}throw i;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(n);case 22:d=(d=e.sent).map((function(e){return e.data})),p=a.state.films,a.setState({films:[].concat(Object(c.a)(p),Object(c.a)(d))});case 26:case"end":return e.stop()}}),e,null,[[4,8,12,20],[13,,15,19]])})));return function(t){return e.apply(this,arguments)}}(),a.state={films:[{title:"",release_date:new Date,format:"",id:0,actors:""}]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.getFilms("").then((function(t){e.setState({films:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(b.a,null,r.a.createElement(ie,{handlerSearch:this.handlerSearch}),this.state.films.map((function(a){return r.a.createElement("div",{key:a.id,className:t.film},r.a.createElement(N,{film:a,handlerDeleteFilm:e.handlerDeleteFilm}))})),r.a.createElement(y.a,{container:!0,justify:"center",className:t.container},r.a.createElement(K,{handlerAddFilm:this.handlerAddFilm,handlerMassiveAddFilms:this.handlerMassiveAddFilms})))}}]),t}(r.a.Component),se=Object(v.a)((function(e){return{container:{margin:e.spacing(1)},film:{margin:e.spacing(2)}}}))(ce);var oe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(se,null))},ue=a(82),me=a(179),de=a(49),pe=a(180),he=Object(ue.a)({palette:{primary:me.a,secondary:de.a}});i.a.render(r.a.createElement(pe.a,{theme:he},r.a.createElement(oe,null)),document.getElementById("root"))},98:function(e,t,a){e.exports=a(135)}},[[98,1,2]]]);
//# sourceMappingURL=main.5891f7b0.chunk.js.map